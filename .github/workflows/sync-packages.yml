      # --- Part D: Commit-based repositories with automated signing ---
      - name: Check commit-based repositories and build WGT
        run: |
          declare -A repos=(
            ["thonythony/fireplace"]="fireplace"
            ["KaashDev/TVapp"]="TVapp"
            ["dmaidaniuk/vlc-tizen"]="vlc-tizen"
            ["fgl27/smarttv-twitch"]="smarttv-twitch"
          )

          last_seen=$(cat cache/last_seen.json)
          updated=${UPDATED:-false}

          for repo in "${!repos[@]}"; do
            api="https://api.github.com/repos/$repo/commits?per_page=1"
            latest_sha=$(curl -s $api | jq -r '.[0].sha // empty')
            [ -z "$latest_sha" ] && continue
            prev_sha=$(echo "$last_seen" | jq -r --arg r "$repo" '.[$r].sha // empty')

            if [ "$latest_sha" != "$prev_sha" ]; then
              echo "ðŸ”§ New commit for $repo"
              git clone --depth 1 "https://github.com/$repo.git"
              cd "$(basename $repo)"

              # Build / copy WGT files
              case "$repo" in
                "fgl27/smarttv-twitch")
                  npm install --no-audit
                  npm run build || true
                  ;;
                "dmaidaniuk/vlc-tizen")
                  npm install --no-audit
                  npm run build || true
                  ;;
                "thonythony/fireplace")
                  npm install --no-audit
                  npm run build || true
                  ;;
                "KaashDev/TVapp")
                  wget -q -O ../wgt_files/TVapp.wgt "https://github.com/KaashDev/TVapp/raw/main/TVapp.wgt"
                  cd ..
                  last_seen=$(echo "$last_seen" | jq --arg r "$repo" --arg s "$latest_sha" '.[$r].sha=$s')
                  updated=true
                  continue
                  ;;
              esac

              # Create expect script for automated signing
              cat > package.exp << 'EOF'
#!/usr/bin/expect -f
set timeout 300
spawn $env(GITHUB_WORKSPACE)/tizen-studio/tools/ide/bin/tizen package -t wgt -s CommunityPack -- .
expect {
    "Author password:" {
        send "1234\r"
        exp_continue
    }
    "Save author password" {
        send "n\r"
        exp_continue
    }
    "Distributor1 password:" {
        send "1234\r"
        exp_continue
    }
    "Save distributor1 password" {
        send "n\r"
        exp_continue
    }
    eof
}
EOF
              chmod +x package.exp
              ./package.exp

              # Move WGT files to central folder
              mkdir -p ../wgt_files
              find . -type f -name '*.wgt' -exec cp {} ../wgt_files/ \;

              cd ..
              last_seen=$(echo "$last_seen" | jq --arg r "$repo" --arg s "$latest_sha" '.[$r].sha=$s')
              updated=true
            fi
          done

          # Save updated last_seen
          echo "$last_seen" > cache/last_seen.json
          echo "UPDATED=$updated" >> $GITHUB_ENV
